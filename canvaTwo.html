<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Udm Onboarding Flowchart</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 20px;
  }

  .svg-wrapper {
    width: 100%;
    max-width: 1400px;
    height: 900px;
    margin: 20px auto;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: scroll;
    background-color: #fafafa;
    box-shadow: 0 2px 8px rgba(63,69,81,0.16);
    cursor: grab;
    position: relative;
  }

  .svg-wrapper:active {
    cursor: grabbing;
  }

  .svg-inner {
    transform-origin: top left;
    transition: transform 0.15s ease;
    display: inline-block;
  }

  .zoom-controls {
    margin: 10px 0;
  }

  .zoom-button {
    background: #0073e6;
    color: white;
    border: none;
    padding: 8px 12px;
    margin: 0 5px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
  }

  .zoom-button:hover {
    background: #005bb5;
  }
</style>
</head>
<body>
  <h1>Udm Onboarding Flowchart</h1>

  <div class="zoom-controls">
    <button class="zoom-button" id="zoomIn">+</button>
    <button class="zoom-button" id="zoomOut">âˆ’</button>
    <span id="zoomLevel">100%</span>
  </div>

  <div class="svg-wrapper" id="svgWrapper">
    <div class="svg-inner" id="svgInner">
      <object id="svgObject" data="UdmOnboardingFlowchartx.svg" type="image/svg+xml"></object>
    </div>
  </div>

  <script>
    const wrapper = document.getElementById('svgWrapper');
    const inner = document.getElementById('svgInner');
    const zoomText = document.getElementById('zoomLevel');

    let scale = 1;
    let isDragging = false;
    let startX = 0;
    let startY = 0;
    let scrollLeft = 0;
    let scrollTop = 0;

    function updateZoom() {
      inner.style.transform = `scale(${scale})`;
      zoomText.textContent = `${Math.round(scale * 100)}%`;
    }

    // Zoom buttons
    document.getElementById('zoomIn').addEventListener('click', () => {
      zoomAtCenter(1.1);
    });

    document.getElementById('zoomOut').addEventListener('click', () => {
      zoomAtCenter(1/1.1);
    });

    // Mouse wheel zoom (Ctrl or Cmd key)
    wrapper.addEventListener('wheel', (e) => {
      if (e.ctrlKey || e.metaKey) {
        e.preventDefault();
        const zoomFactor = e.deltaY < 0 ? 1.1 : 1/1.1;
        zoomAtMouse(e, zoomFactor);
      }
    });

    function zoomAtCenter(factor) {
      const rect = wrapper.getBoundingClientRect();
      const centerX = rect.width / 2 + wrapper.scrollLeft;
      const centerY = rect.height / 2 + wrapper.scrollTop;
      applyZoom(factor, centerX, centerY);
    }

    function zoomAtMouse(e, factor) {
      const rect = wrapper.getBoundingClientRect();
      const mouseX = e.clientX - rect.left + wrapper.scrollLeft;
      const mouseY = e.clientY - rect.top + wrapper.scrollTop;
      applyZoom(factor, mouseX, mouseY);
    }

    function applyZoom(factor, focalX, focalY) {
      const newScale = Math.min(Math.max(scale * factor, 0.1), 10);
      const scaleRatio = newScale / scale;
      scale = newScale;

      // Adjust scroll to keep focal point in same position
      wrapper.scrollLeft = focalX * scaleRatio - (focalX - wrapper.scrollLeft);
      wrapper.scrollTop  = focalY * scaleRatio - (focalY - wrapper.scrollTop);

      updateZoom();
    }

    // Click-and-drag to pan
    wrapper.addEventListener('mousedown', (e) => {
      isDragging = true;
      startX = e.pageX - wrapper.offsetLeft;
      startY = e.pageY - wrapper.offsetTop;
      scrollLeft = wrapper.scrollLeft;
      scrollTop = wrapper.scrollTop;
      wrapper.style.cursor = 'grabbing';
    });

    wrapper.addEventListener('mouseleave', () => { isDragging = false; wrapper.style.cursor = 'grab'; });
    wrapper.addEventListener('mouseup', () => { isDragging = false; wrapper.style.cursor = 'grab'; });

    wrapper.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      e.preventDefault();
      const x = e.pageX - wrapper.offsetLeft;
      const y = e.pageY - wrapper.offsetTop;
      const walkX = (x - startX);
      const walkY = (y - startY);
      wrapper.scrollLeft = scrollLeft - walkX;
      wrapper.scrollTop = scrollTop - walkY;
    });

    updateZoom();
  </script>
</body>
</html>
