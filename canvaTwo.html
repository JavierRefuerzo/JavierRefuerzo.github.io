<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zoomable SVG Flow Chart</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 20px;
  }

  .svg-container {
    width: 100%;
    max-width: 1200px;
    height: 800px;
    margin: 20px auto;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    background-color: #fafafa;
    box-shadow: 0 2px 8px rgba(63,69,81,0.16);
    cursor: grab;
  }

  .svg-container:active {
    cursor: grabbing;
  }

  .zoom-controls {
    margin: 10px 0;
  }

  .zoom-button {
    background: #0073e6;
    color: white;
    border: none;
    padding: 8px 12px;
    margin: 0 5px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
  }

  .zoom-button:hover {
    background: #005bb5;
  }
</style>
</head>
<body>
  <h1>Flow Chart Viewer</h1>

  <div class="zoom-controls">
    <button class="zoom-button" id="zoomIn">+</button>
    <button class="zoom-button" id="zoomOut">âˆ’</button>
    <span id="zoomLevel">100%</span>
  </div>

  <div class="svg-container" id="svgContainer">
    <!-- Replace 'flowchart.svg' with your SVG file path -->
    <object id="svgObject" data="UdmOnboardingFlowchart.svg" type="image/svg+xml" width="100%" height="100%"></object>
  </div>

  <script>
    const container = document.getElementById('svgContainer');
    const zoomLevelText = document.getElementById('zoomLevel');
    let scale = 1;
    let panX = 0;
    let panY = 0;
    let isPanning = false;
    let startX, startY;

    function applyTransform() {
      const svg = container.querySelector('object').contentDocument?.querySelector('svg');
      if (svg) {
        svg.setAttribute('transform', `translate(${panX}, ${panY}) scale(${scale})`);
      }
    }

    // Zoom buttons
    document.getElementById('zoomIn').addEventListener('click', () => {
      scale = Math.min(scale + 0.1, 3);
      updateTransform();
    });

    document.getElementById('zoomOut').addEventListener('click', () => {
      scale = Math.max(scale - 0.1, 0.3);
      updateTransform();
    });

    // Mouse wheel zoom
    container.addEventListener('wheel', (e) => {
      e.preventDefault();
      const delta = e.deltaY < 0 ? 0.1 : -0.1;
      scale = Math.min(Math.max(scale + delta, 0.3), 3);
      updateTransform();
    });

    // Pan (drag)
    container.addEventListener('mousedown', (e) => {
      isPanning = true;
      startX = e.clientX - panX;
      startY = e.clientY - panY;
    });

    container.addEventListener('mousemove', (e) => {
      if (!isPanning) return;
      panX = e.clientX - startX;
      panY = e.clientY - startY;
      updateTransform();
    });

    container.addEventListener('mouseup', () => (isPanning = false));
    container.addEventListener('mouseleave', () => (isPanning = false));

    function updateTransform() {
      const svgEl = container.querySelector('object').contentDocument?.querySelector('svg');
      if (svgEl) {
        svgEl.setAttribute('transform', `translate(${panX}, ${panY}) scale(${scale})`);
        zoomLevelText.textContent = `${Math.round(scale * 100)}%`;
      }
    }

    // Wait for SVG to load before applying transforms
    document.getElementById('svgObject').addEventListener('load', updateTransform);
  </script>
</body>
</html>
